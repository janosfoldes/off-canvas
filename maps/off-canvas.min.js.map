{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/off-canvas.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","overlay","$","togglerDefault","togglerNoAnim","togglerOpen","OffCanvas","element","_this","this","_classCallCheck","_offCanvas","_parent","parentElement","_prevSibling","previousSibling","_appendTo","attr","_removed","_button","_buttonToggler","_snapTopTo","closeId","_closeEl","document","getElementById","undefined","_locks","lockIds","stringToArray","push","refresh","close","bind","open","window","resize","onResize","on","onOverlayClick","onButtonClick","str","trim","indexOf","split","lenght","toggle","removeClass","addClass","snap","isButtonVisible","is","_isButtonVisible","appendTo","insertAfter","prependTo","toggleClass","css","getBoundingClientRect","bottom","state","hasClass","offCanvases","ready","body","each","index","item"],"mappings":"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","file":"../dist/off-canvas.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// OFF-CANVAS\r\n// ==========\r\n\r\nconst attrAppendTo        = 'data-append-to';\r\nconst attrClose           = 'data-close';\r\nconst attrOffCanvas       = 'data-off-canvas';\r\nconst attrOffCanvasButton = 'data-off-canvas-button';\r\nconst attrOffCanvasLock   = 'data-off-canvas-lock';\r\nconst attrSnapTopTo       = 'data-snap-top-to';\r\nconst attrToggler         = 'data-toggler';\r\nconst overlay             = $('<div class=\"canvas-overlay\"></div>');\r\nconst togglerClosed       = 'is-closed';\r\nconst togglerDefault      = 'is-active';\r\nconst togglerLocked       = 'is-locked';\r\nconst togglerNoAnim       = 'no-anim';\r\nconst togglerOpen         = 'is-open';\r\nconst togglerVisible      = 'is-visible';\r\n\r\n// Off-Canvas\r\n// ----------\r\n\r\nexport default class OffCanvas {\r\n    constructor(element) {\r\n        /* Initialize */\r\n        this._offCanvas = $(element);\r\n        this._parent = element.parentElement;\r\n        this._prevSibling = element.previousSibling;\r\n        this._appendTo = $('#' + this._offCanvas.attr(attrAppendTo));\r\n        this._removed = false;\r\n        this._button = $('#' + this._offCanvas.attr(attrOffCanvasButton));\r\n        this._buttonToggler = this._button.attr(attrToggler) || togglerDefault;\r\n        this._snapTopTo = $('#' + this._offCanvas.attr(attrSnapTopTo));\r\n\r\n        /* Initialize object to close */\r\n        let closeId = this._offCanvas.attr(attrClose);\r\n        this._closeEl = (closeId) ? document.getElementById(closeId) : undefined;\r\n\r\n        /* Locks */\r\n        this._locks = []\r\n        let lockIds = OffCanvas.stringToArray(this._offCanvas.attr(attrOffCanvasLock));\r\n        for (let i = 0; i < lockIds.length; i++) {\r\n            this._locks.push($('#' + lockIds[i]));\r\n        }\r\n\r\n        /* Refresh */\r\n        this.refresh();\r\n\r\n        /* Attach methods to the DOM Element of this off-canvas */\r\n        element.close = this.close.bind(this);\r\n        element.open = this.open.bind(this);\r\n\r\n        /* Events */\r\n        $(window).resize((e) => { this.onResize(e) });\r\n        overlay.on('click', (e) => { this.onOverlayClick(e) });\r\n        this._button.on('click', (e) => { this.onButtonClick(e) });\r\n    }\r\n\r\n    close() {\r\n        this.toggle(false);\r\n    }\r\n\r\n    onButtonClick(e) {\r\n        this._offCanvas.removeClass(togglerNoAnim);\r\n        this.toggle();\r\n    }\r\n\r\n    onOverlayClick(e) {\r\n        this.toggle(false);\r\n    }\r\n\r\n    onResize(e) {\r\n         this.refresh();\r\n    }\r\n\r\n    open() {\r\n        this.toggle(true);\r\n    }\r\n\r\n    refresh() {\r\n        this._offCanvas.addClass(togglerNoAnim);\r\n        this.snap();\r\n        let isButtonVisible = this._button.is(':visible');\r\n        if (isButtonVisible != this._isButtonVisible) { // State changed\r\n            if (isButtonVisible) {\r\n                // Remove off-canvas element\r\n                if (this._appendTo !== null) {\r\n                    this._removed = true;\r\n                    this._offCanvas.appendTo(this._appendTo);\r\n                }\r\n            } else {\r\n                if (this._removed) {\r\n                    // Move off-canvas element back\r\n                    if (this._prevSibling !== null) {\r\n                        this._offCanvas.insertAfter(this._prevSibling);\r\n                    } else {\r\n                        this._offCanvas.prependTo(this._parent);\r\n                    }\r\n                    this._removed = false;\r\n                }\r\n            }\r\n            this._offCanvas.toggleClass(togglerDefault, isButtonVisible);\r\n            this.toggle(false);\r\n            this._isButtonVisible = isButtonVisible;\r\n        }\r\n    }\r\n\r\n    snap() {\r\n        // Snap Top\r\n        if (this._snapTopTo.length > 0) {\r\n            this._offCanvas.css('top', this._snapTopTo[0].getBoundingClientRect().bottom + 'px');\r\n        }\r\n    }\r\n\r\n    static stringToArray(str) {\r\n        let a = [];\r\n        if (typeof str === 'string') {\r\n            str = str.trim();\r\n            if (str != '') {\r\n                a = (str.indexOf(',') > -1) ? str.split(/,/) : str.split(/ /);\r\n                for (let i=0; i < a.lenght; i++) a[i] = a[i].trim();\r\n            }\r\n        }\r\n        return a;\r\n    }\r\n\r\n    toggle(state) {\r\n        if (state == undefined) state = !this._offCanvas.hasClass(togglerOpen);\r\n        this._button.toggleClass(this._buttonToggler, state);\r\n        this._offCanvas.toggleClass(togglerOpen, state);\r\n        this._offCanvas.toggleClass(togglerClosed, !state);\r\n        overlay.toggleClass(togglerVisible, state);\r\n        if (state && this._closeEl != undefined) {\r\n            this._closeEl.close();\r\n        }\r\n        for (let i = 0; i < this._locks.length; i++) {\r\n            this._locks[i].toggleClass(togglerLocked, state)\r\n        }\r\n    }\r\n}\r\n\r\n// Initialize canvas overlay and elements with 'data-off-canvas' attribute\r\n// -----------------------------------------------------------------------\r\n\r\nlet offCanvases = [];\r\n$(document).ready(() => {\r\n    overlay.appendTo(document.body);\r\n    $('[' + attrOffCanvas + ']').each((index, item) => {\r\n        offCanvases.push(new OffCanvas(item));\r\n    });\r\n});\r\n"]}