{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/off-canvas.js"],"names":[],"mappings":"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","file":"../src/off-canvas.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// OFF-CANVAS\r\n// ==========\r\n\r\nconst attrAppendTo        = 'data-append-to';\r\nconst attrClose           = 'data-close';\r\nconst attrOffCanvas       = 'data-off-canvas';\r\nconst attrOffCanvasButton = 'data-off-canvas-button';\r\nconst attrOffCanvasLock   = 'data-off-canvas-lock';\r\nconst attrSnapTopTo       = 'data-snap-top-to';\r\nconst attrToggler         = 'data-toggler';\r\nconst overlay             = $('<div class=\"canvas-overlay\"></div>');\r\nconst togglerClosed       = 'is-closed';\r\nconst togglerDefault      = 'is-active';\r\nconst togglerLocked       = 'is-locked';\r\nconst togglerNoAnim       = 'no-anim';\r\nconst togglerOpen         = 'is-open';\r\nconst togglerVisible      = 'is-visible';\r\n\r\n// Off-Canvas\r\n// ----------\r\n\r\nexport default class OffCanvas {\r\n    constructor(element) {\r\n        /* Initialize */\r\n        this._offCanvas = $(element);\r\n        this._parent = element.parentElement;\r\n        this._prevSibling = element.previousSibling;\r\n        this._appendTo = $('#' + this._offCanvas.attr(attrAppendTo));\r\n        this._removed = false;\r\n        this._button = $('#' + this._offCanvas.attr(attrOffCanvasButton));\r\n        this._buttonToggler = this._button.attr(attrToggler) || togglerDefault;\r\n        this._snapTopTo = $('#' + this._offCanvas.attr(attrSnapTopTo));\r\n\r\n        /* Initialize object to close */\r\n        let closeId = this._offCanvas.attr(attrClose);\r\n        this._closeEl = (closeId) ? document.getElementById(closeId) : undefined;\r\n\r\n        /* Locks */\r\n        this._locks = []\r\n        let lockIds = OffCanvas.stringToArray(this._offCanvas.attr(attrOffCanvasLock));\r\n        for (let i = 0; i < lockIds.length; i++) {\r\n            this._locks.push($('#' + lockIds[i]));\r\n        }\r\n\r\n        /* Refresh */\r\n        this.refresh();\r\n\r\n        /* Attach methods to the DOM Element of this off-canvas */\r\n        element.close = this.close.bind(this);\r\n        element.open = this.open.bind(this);\r\n\r\n        /* Events */\r\n        $(window).resize((e) => { this.onResize(e) });\r\n        overlay.on('click', (e) => { this.onOverlayClick(e) });\r\n        this._button.on('click', (e) => { this.onButtonClick(e) });\r\n    }\r\n\r\n    close() {\r\n        this.toggle(false);\r\n    }\r\n\r\n    onButtonClick(e) {\r\n        this._offCanvas.removeClass(togglerNoAnim);\r\n        this.toggle();\r\n    }\r\n\r\n    onOverlayClick(e) {\r\n        this.toggle(false);\r\n    }\r\n\r\n    onResize(e) {\r\n         this.refresh();\r\n    }\r\n\r\n    open() {\r\n        this.toggle(true);\r\n    }\r\n\r\n    refresh() {\r\n        this._offCanvas.addClass(togglerNoAnim);\r\n        this.snap();\r\n        let isButtonVisible = this._button.is(':visible');\r\n        if (isButtonVisible != this._isButtonVisible) { // State changed\r\n            if (isButtonVisible) {\r\n                // Remove off-canvas element\r\n                if (this._appendTo !== null) {\r\n                    this._removed = true;\r\n                    this._offCanvas.appendTo(this._appendTo);\r\n                }\r\n            } else {\r\n                if (this._removed) {\r\n                    // Move off-canvas element back\r\n                    if (this._prevSibling !== null) {\r\n                        this._offCanvas.insertAfter(this._prevSibling);\r\n                    } else {\r\n                        this._offCanvas.prependTo(this._parent);\r\n                    }\r\n                    this._removed = false;\r\n                }\r\n            }\r\n            this._offCanvas.toggleClass(togglerDefault, isButtonVisible);\r\n            this.toggle(false);\r\n            this._isButtonVisible = isButtonVisible;\r\n        }\r\n    }\r\n\r\n    snap() {\r\n        // Snap Top\r\n        if (this._snapTopTo.length > 0) {\r\n            this._offCanvas.css('top', this._snapTopTo[0].getBoundingClientRect().bottom + 'px');\r\n        }\r\n    }\r\n\r\n    static stringToArray(str) {\r\n        let a = [];\r\n        if (typeof str === 'string') {\r\n            str = str.trim();\r\n            if (str != '') {\r\n                a = (str.indexOf(',') > -1) ? str.split(/,/) : str.split(/ /);\r\n                for (let i=0; i < a.lenght; i++) a[i] = a[i].trim();\r\n            }\r\n        }\r\n        return a;\r\n    }\r\n\r\n    toggle(state) {\r\n        if (state == undefined) state = !this._offCanvas.hasClass(togglerOpen);\r\n        this._button.toggleClass(this._buttonToggler, state);\r\n        this._offCanvas.toggleClass(togglerOpen, state);\r\n        this._offCanvas.toggleClass(togglerClosed, !state);\r\n        overlay.toggleClass(togglerVisible, state);\r\n        if (state && this._closeEl != undefined) {\r\n            this._closeEl.close();\r\n        }\r\n        for (let i = 0; i < this._locks.length; i++) {\r\n            this._locks[i].toggleClass(togglerLocked, state)\r\n        }\r\n    }\r\n}\r\n\r\n// Initialize canvas overlay and elements with 'data-off-canvas' attribute\r\n// -----------------------------------------------------------------------\r\n\r\nlet offCanvases = [];\r\n$(document).ready(() => {\r\n    overlay.appendTo(document.body);\r\n    $('[' + attrOffCanvas + ']').each((index, item) => {\r\n        offCanvases.push(new OffCanvas(item));\r\n    });\r\n});\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvb2ZmLWNhbnZhcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7QUNBQTtBQUNBO0FBRUEsSUFBTSxZQUFZLEdBQVUsZ0JBQTVCO0FBQ0EsSUFBTSxTQUFTLEdBQWEsWUFBNUI7QUFDQSxJQUFNLGFBQWEsR0FBUyxpQkFBNUI7QUFDQSxJQUFNLG1CQUFtQixHQUFHLHdCQUE1QjtBQUNBLElBQU0saUJBQWlCLEdBQUssc0JBQTVCO0FBQ0EsSUFBTSxhQUFhLEdBQVMsa0JBQTVCO0FBQ0EsSUFBTSxXQUFXLEdBQVcsY0FBNUI7QUFDQSxJQUFNLE9BQU8sR0FBZSxDQUFDLENBQUMsb0NBQUQsQ0FBN0I7QUFDQSxJQUFNLGFBQWEsR0FBUyxXQUE1QjtBQUNBLElBQU0sY0FBYyxHQUFRLFdBQTVCO0FBQ0EsSUFBTSxhQUFhLEdBQVMsV0FBNUI7QUFDQSxJQUFNLGFBQWEsR0FBUyxTQUE1QjtBQUNBLElBQU0sV0FBVyxHQUFXLFNBQTVCO0FBQ0EsSUFBTSxjQUFjLEdBQVEsWUFBNUIsQyxDQUVBO0FBQ0E7O0lBRXFCLFM7OztBQUNqQixxQkFBWSxPQUFaLEVBQXFCO0FBQUE7O0FBQUE7O0FBQ2pCO0FBQ0EsU0FBSyxVQUFMLEdBQWtCLENBQUMsQ0FBQyxPQUFELENBQW5CO0FBQ0EsU0FBSyxPQUFMLEdBQWUsT0FBTyxDQUFDLGFBQXZCO0FBQ0EsU0FBSyxZQUFMLEdBQW9CLE9BQU8sQ0FBQyxlQUE1QjtBQUNBLFNBQUssU0FBTCxHQUFpQixDQUFDLENBQUMsTUFBTSxLQUFLLFVBQUwsQ0FBZ0IsSUFBaEIsQ0FBcUIsWUFBckIsQ0FBUCxDQUFsQjtBQUNBLFNBQUssUUFBTCxHQUFnQixLQUFoQjtBQUNBLFNBQUssT0FBTCxHQUFlLENBQUMsQ0FBQyxNQUFNLEtBQUssVUFBTCxDQUFnQixJQUFoQixDQUFxQixtQkFBckIsQ0FBUCxDQUFoQjtBQUNBLFNB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SztBQUN0QixVQUFJLENBQUMsR0FBRyxFQUFSOztBQUNBLFVBQUksT0FBTyxHQUFQLEtBQWUsUUFBbkIsRUFBNkI7QUFDekIsUUFBQSxHQUFHLEdBQUcsR0FBRyxDQUFDLElBQUosRUFBTjs7QUFDQSxZQUFJLEdBQUcsSUFBSSxFQUFYLEVBQWU7QUFDWCxVQUFBLENBQUMsR0FBSSxHQUFHLENBQUMsT0FBSixDQUFZLEdBQVosSUFBbUIsQ0FBQyxDQUFyQixHQUEwQixHQUFHLENBQUMsS0FBSixDQUFVLEdBQVYsQ0FBMUIsR0FBMkMsR0FBRyxDQUFDLEtBQUosQ0FBVSxHQUFWLENBQS9DOztBQUNBLGVBQUssSUFBSSxDQUFDLEdBQUMsQ0FBWCxFQUFjLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBcEIsRUFBNEIsQ0FBQyxFQUE3QjtBQUFpQyxZQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFDLENBQUMsQ0FBRCxDQUFELENBQUssSUFBTCxFQUFQO0FBQWpDO0FBQ0g7QUFDSjs7QUFDRCxhQUFPLENBQVA7QUFDSDs7OztLQWlCTDtBQUNBOzs7O0FBRUEsSUFBSSxXQUFXLEdBQUcsRUFBbEI7QUFDQSxDQUFDLENBQUMsUUFBRCxDQUFELENBQVksS0FBWixDQUFrQixZQUFNO0FBQ3BCLEVBQUEsT0FBTyxDQUFDLFFBQVIsQ0FBaUIsUUFBUSxDQUFDLElBQTFCO0FBQ0EsRUFBQSxDQUFDLENBQUMsTUFBTSxhQUFOLEdBQXNCLEdBQXZCLENBQUQsQ0FBNkIsSUFBN0IsQ0FBa0MsVUFBQyxLQUFELEVBQVEsSUFBUixFQUFpQjtBQUMvQyxJQUFBLFdBQVcsQ0FBQyxJQUFaLENBQWlCLElBQUksU0FBSixDQUFjLElBQWQsQ0FBakI7QUFDSCxHQUZEO0FBR0gsQ0FMRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8vIE9GRi1DQU5WQVNcclxuLy8gPT09PT09PT09PVxyXG5cclxuY29uc3QgYXR0ckFwcGVuZFRvICAgICAgICA9ICdkYXRhLWFwcGVuZC10byc7XHJcbmNvbnN0IGF0dHJDbG9zZSAgICAgICAgICAgPSAnZGF0YS1jbG9zZSc7XHJcbmNvbnN0IGF0dHJPZmZDYW52YXMgICAgICAgPSAnZGF0YS1vZmYtY2FudmFzJztcclxuY29uc3QgYXR0ck9mZkNhbnZhc0J1dHRvbiA9ICdkYXRhLW9mZi1jYW52YXMtYnV0dG9uJztcclxuY29uc3QgYXR0ck9mZkNhbnZhc0xvY2sgICA9ICdkYXRhLW9mZi1jYW52YXMtbG9jayc7XHJcbmNvbnN0IGF0dHJTbmFwVG9wVG8gICAgICAgPSAnZGF0YS1zbmFwLXRvcC10byc7XHJcbmNvbnN0IGF0dHJUb2dnbGVyICAgICAgICAgPSAnZGF0YS10b2dnbGVyJztcclxuY29uc3Qgb3ZlcmxheSAgICAgICAgICAgICA9ICQoJzxkaXYgY2xhc3M9XCJjYW52YXMtb3ZlcmxheVwiPjwvZGl2PicpO1xyXG5jb25zdCB0b2dnbGVyQ2xvc2VkICAgICAgID0gJ2lzLWNsb3NlZCc7XHJcbmNvbnN0IHRvZ2dsZXJEZWZhdWx0ICAgICAgPSAnaXMtYWN0aXZlJztcclxuY29uc3QgdG9nZ2xlckxvY2tlZCAgICAgICA9ICdpcy1sb2NrZWQnO1xyXG5jb25zdCB0b2dnbGVyTm9BbmltICAgICAgID0gJ25vLWFuaW0nO1xyXG5jb25zdCB0b2dnbGVyT3BlbiAgICAgICAgID0gJ2lzLW9wZW4nO1xyXG5jb25zdCB0b2dnbGVyVmlzaWJsZSAgICAgID0gJ2lzLXZpc2libGUnO1xyXG5cclxuLy8gT2ZmLUNhbnZhc1xyXG4vLyAtLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPZmZDYW52YXMge1xyXG4gICAgY29uc3RydWN0b3IoZWxlbWVudCkge1xyXG4gICAgICAgIC8qIEluaXRpYWxpemUgKi9cclxuICAgICAgICB0aGlzLl9vZmZDYW52YXMgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3BhcmVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICB0aGlzLl9wcmV2U2libGluZyA9IGVsZW1lbnQucHJldmlvdXNTaWJsaW5nO1xyXG4gICAgICAgIHRoaXMuX2FwcGVuZFRvID0gJCgnIycgKyB0aGlzLl9vZmZDYW52YXMuYXR0cihhdHRyQXBwZW5kVG8pKTtcclxuICAgICAgICB0aGlzLl9yZW1vdmVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uID0gJCgnIycgKyB0aGlzLl9vZmZDYW52YXMuYXR0cihhdHRyT2ZmQ2FudmFzQnV0dG9uKSk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uVG9nZ2xlciA9IHRoaXMuX2J1dHRvbi5hdHRyKGF0dHJUb2dnbGVyKSB8fCB0b2dnbGVyRGVmYXVsdDtcclxuICAgICAgICB0aGlzLl9zbmFwVG9wVG8gPSAkKCcjJyArIHRoaXMuX29mZkNhbnZhcy5hdHRyKGF0dHJTbmFwVG9wVG8pKTtcclxuXHJcbiAgICAgICAgLyogSW5pdGlhbGl6ZSBvYmplY3QgdG8gY2xvc2UgKi9cclxuICAgICAgICBsZXQgY2xvc2VJZCA9IHRoaXMuX29mZkNhbnZhcy5hdHRyKGF0dHJDbG9zZSk7XHJcbiAgICAgICAgdGhpcy5fY2xvc2VFbCA9IChjbG9zZUlkKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNsb3NlSWQpIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAvKiBMb2NrcyAqL1xyXG4gICAgICAgIHRoaXMuX2xvY2tzID0gW11cclxuICAgICAgICBsZXQgbG9ja0lkcyA9IE9mZkNhbnZhcy5zdHJpbmdUb0FycmF5KHRoaXMuX29mZkNhbnZhcy5hdHRyKGF0dHJPZmZDYW52YXNMb2NrKSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NrSWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xvY2tzLnB1c2goJCgnIycgKyBsb2NrSWRzW2ldKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBSZWZyZXNoICovXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcblxyXG4gICAgICAgIC8qIEF0dGFjaCBtZXRob2RzIHRvIHRoZSBET00gRWxlbWVudCBvZiB0aGlzIG9mZi1jYW52YXMgKi9cclxuICAgICAgICBlbGVtZW50LmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIGVsZW1lbnQub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICAvKiBFdmVudHMgKi9cclxuICAgICAgICAkKHdpbmRvdykucmVzaXplKChlKSA9PiB7IHRoaXMub25SZXNpemUoZSkgfSk7XHJcbiAgICAgICAgb3ZlcmxheS5vbignY2xpY2snLCAoZSkgPT4geyB0aGlzLm9uT3ZlcmxheUNsaWNrKGUpIH0pO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbi5vbignY2xpY2snLCAoZSkgPT4geyB0aGlzLm9uQnV0dG9uQ2xpY2soZSkgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGUoZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQnV0dG9uQ2xpY2soZSkge1xyXG4gICAgICAgIHRoaXMuX29mZkNhbnZhcy5yZW1vdmVDbGFzcyh0b2dnbGVyTm9BbmltKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3ZlcmxheUNsaWNrKGUpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZShmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNpemUoZSkge1xyXG4gICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5fb2ZmQ2FudmFzLmFkZENsYXNzKHRvZ2dsZXJOb0FuaW0pO1xyXG4gICAgICAgIHRoaXMuc25hcCgpO1xyXG4gICAgICAgIGxldCBpc0J1dHRvblZpc2libGUgPSB0aGlzLl9idXR0b24uaXMoJzp2aXNpYmxlJyk7XHJcbiAgICAgICAgaWYgKGlzQnV0dG9uVmlzaWJsZSAhPSB0aGlzLl9pc0J1dHRvblZpc2libGUpIHsgLy8gU3RhdGUgY2hhbmdlZFxyXG4gICAgICAgICAgICBpZiAoaXNCdXR0b25WaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgb2ZmLWNhbnZhcyBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fYXBwZW5kVG8gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vZmZDYW52YXMuYXBwZW5kVG8odGhpcy5fYXBwZW5kVG8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlbW92ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIG9mZi1jYW52YXMgZWxlbWVudCBiYWNrXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3ByZXZTaWJsaW5nICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29mZkNhbnZhcy5pbnNlcnRBZnRlcih0aGlzLl9wcmV2U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb2ZmQ2FudmFzLnByZXBlbmRUbyh0aGlzLl9wYXJlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fb2ZmQ2FudmFzLnRvZ2dsZUNsYXNzKHRvZ2dsZXJEZWZhdWx0LCBpc0J1dHRvblZpc2libGUpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZShmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzQnV0dG9uVmlzaWJsZSA9IGlzQnV0dG9uVmlzaWJsZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc25hcCgpIHtcclxuICAgICAgICAvLyBTbmFwIFRvcFxyXG4gICAgICAgIGlmICh0aGlzLl9zbmFwVG9wVG8ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9vZmZDYW52YXMuY3NzKCd0b3AnLCB0aGlzLl9zbmFwVG9wVG9bMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tICsgJ3B4Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzdHJpbmdUb0FycmF5KHN0cikge1xyXG4gICAgICAgIGxldCBhID0gW107XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHN0ciA9IHN0ci50cmltKCk7XHJcbiAgICAgICAgICAgIGlmIChzdHIgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGEgPSAoc3RyLmluZGV4T2YoJywnKSA+IC0xKSA/IHN0ci5zcGxpdCgvLC8pIDogc3RyLnNwbGl0KC8gLyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpPTA7IGkgPCBhLmxlbmdodDsgaSsrKSBhW2ldID0gYVtpXS50cmltKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGE7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlKHN0YXRlKSB7XHJcbiAgICAgICAgaWYgKHN0YXRlID09IHVuZGVmaW5lZCkgc3RhdGUgPSAhdGhpcy5fb2ZmQ2FudmFzLmhhc0NsYXNzKHRvZ2dsZXJPcGVuKTtcclxuICAgICAgICB0aGlzLl9idXR0b24udG9nZ2xlQ2xhc3ModGhpcy5fYnV0dG9uVG9nZ2xlciwgc3RhdGUpO1xyXG4gICAgICAgIHRoaXMuX29mZkNhbnZhcy50b2dnbGVDbGFzcyh0b2dnbGVyT3Blbiwgc3RhdGUpO1xyXG4gICAgICAgIHRoaXMuX29mZkNhbnZhcy50b2dnbGVDbGFzcyh0b2dnbGVyQ2xvc2VkLCAhc3RhdGUpO1xyXG4gICAgICAgIG92ZXJsYXkudG9nZ2xlQ2xhc3ModG9nZ2xlclZpc2libGUsIHN0YXRlKTtcclxuICAgICAgICBpZiAoc3RhdGUgJiYgdGhpcy5fY2xvc2VFbCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2xvc2VFbC5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2xvY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xvY2tzW2ldLnRvZ2dsZUNsYXNzKHRvZ2dsZXJMb2NrZWQsIHN0YXRlKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8gSW5pdGlhbGl6ZSBjYW52YXMgb3ZlcmxheSBhbmQgZWxlbWVudHMgd2l0aCAnZGF0YS1vZmYtY2FudmFzJyBhdHRyaWJ1dGVcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmxldCBvZmZDYW52YXNlcyA9IFtdO1xyXG4kKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XHJcbiAgICBvdmVybGF5LmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO1xyXG4gICAgJCgnWycgKyBhdHRyT2ZmQ2FudmFzICsgJ10nKS5lYWNoKChpbmRleCwgaXRlbSkgPT4ge1xyXG4gICAgICAgIG9mZkNhbnZhc2VzLnB1c2gobmV3IE9mZkNhbnZhcyhpdGVtKSk7XHJcbiAgICB9KTtcclxufSk7XHJcbiJdfQ=="}